# Makefile automatically generated by ghdl
# Version: GHDL 0.36 (v0.36) [Dunoon edition] - GCC back-end code generator
# Command used to generate this makefile:
# ghdl --gen-makefile lan9254esctb


CROSS=
GHDL=$(CROSS)ghdl
CXX=$(CROSS)g++
GHDLFLAGS=
SIITOOL=siitool

-include config.local.mk

PROG=lan9254escrun lan9254esctb
OBJS=Lan9254Pkg.o Lan9254ESCPkg.o Lan9254ESC.o Lan9254Hbi.o Lan9254HbiSoft.o readWriteSim.o EEEmulPkg.o EEPROMContentPkg.o RxPDOSoft.o IlaWrappersPkg.o ESCMbxPkg.o

TOPS=Lan9254ESCTb.o  #Lan9254ESCrun.o 

# Default target
all: $(PROG)

# Elaboration target
lan9254escrun: $(OBJS) Lan9254ESCrun.o
	$(GHDL) -e -Wl,readWriteSim.o $(GHDLFLAGS) $@

# Elaboration target
lan9254esctb: $(OBJS) Lan9254ESCTb.o
	$(GHDL) -e $(GHDLFLAGS) $@

readWriteSim.o: readWriteSim.c
	$(CXX) -c -o $@ $^ -Wall

# Run target
run: $(PROG)
	$(GHDL) -r $(PROG) $(GHDLRUNFLAGS)

EEPROMContentPkg.vhd: eeprom.bin gen-prom.awk
	od -Ad -tu2 --endian=little -w2 -v $< | awk -f gen-prom.awk > $@

eeprom.bin: test.xml
	$(RM) $@
	$(SIITOOL) -m -o $@ $<

# Targets to analyze files
##MMRxPDOSoft.o: RxPDOSoft.vhd
##MM	$(GHDL) -a $(GHDLFLAGS) $<
##MMEEPROMContentPkg.o: EEPROMContentPkg.vhd
##MM	$(GHDL) -a $(GHDLFLAGS) $<
##MMIlaWrappersPkg.o: IlaWrappersPkg.vhd
##MM	$(GHDL) -a $(GHDLFLAGS) $<
##MMEEEmulPkg.o: EEEmulPkg.vhd
##MM	$(GHDL) -a $(GHDLFLAGS) $<
##MMLan9254Pkg.o: Lan9254Pkg.vhd
##MM	$(GHDL) -a $(GHDLFLAGS) $<
##MMLan9254ESCPkg.o: Lan9254ESCPkg.vhd
##MM	$(GHDL) -a $(GHDLFLAGS) $<
##MMLan9254ESC.o: Lan9254ESC.vhd 
##MM	$(GHDL) -a $(GHDLFLAGS) $<
##MMLan9254Hbi.o: Lan9254Hbi.vhd
##MM	$(GHDL) -a $(GHDLFLAGS) $<
##MMLan9254HbiSoft.o: Lan9254HbiSoft.vhd
##MM	$(GHDL) -a $(GHDLFLAGS) $<
##MMLan9254ESCTb.o: Lan9254ESCTb.vhd
##MM	$(GHDL) -a $(GHDLFLAGS) $<
##MMLan9254ESCrun.o: Lan9254ESCrun.vhd
##MM	$(GHDL) -a $(GHDLFLAGS) $<
%.o: %.vhd
	$(GHDL) -a $(GHDLFLAGS) $<

# Files dependences
Lan9254ESC.o:  Lan9254Pkg.o Lan9254ESCPkg.o EEEmulPkg.o RxPDOSoft.o IlaWrappersPkg.o ESCMbxPkg.o
EEEmulPkg.o: EEPROMContentPkg.o Lan9254Pkg.o Lan9254ESCPkg.o
Lan9254Hbi.o:  Lan9254Pkg.o Lan9254Pkg.o Lan9254ESCPkg.o
Lan9254HbiSoft.o:  Lan9254Pkg.o Lan9254Hbi.o Lan9254ESCPkg.o
Lan9254ESCTb.o:  Lan9254Pkg.o Lan9254ESC.o Lan9254Hbi.o Lan9254HbiSoft.o Lan9254ESCPkg.o
Lan9254ESCrun.o:  Lan9254Pkg.o Lan9254ESC.o Lan9254Hbi.o Lan9254Hbi.o Lan9254ESCPkg.o
RxPDOSoft.o: Lan9254ESCPkg.o Lan9254Pkg.o
Lan9254ESCPkg.o: Lan9254Pkg.o

clean:
	$(RM) $(OBJS) $(PROG) dump.ghw work-*.cf e~$(PROG).o $(TOPS) EEPROMContentPkg.vhd eeprom.bin

.PHONY: clean all run
